"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[60],{1911:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>j,frontMatter:()=>a,metadata:()=>d,toc:()=>h});var i=t(4848),s=t(8453),r=t(1470),o=t(9365);const a={},l="Prepare Your Microscopy Data",d={id:"getting-started-with-loon/data",title:"Prepare Your Microscopy Data",description:"#### To use Loon, you must format your microscopy data according to Loon's requirements before uploading it.",source:"@site/docs/getting-started-with-loon/data.md",sourceDirName:"getting-started-with-loon",slug:"/getting-started-with-loon/data",permalink:"/loonar/docs/getting-started-with-loon/data",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/loonar/docs/getting-started-with-loon/"},next:{title:"Optional: Use Data from TrackMate",permalink:"/loonar/docs/getting-started-with-loon/trackmate-data"}},c={},h=[{value:"To use Loon, you must format your microscopy data according to Loon&#39;s requirements before uploading it.",id:"to-use-loon-you-must-format-your-microscopy-data-according-to-loons-requirements-before-uploading-it",level:4},{value:"Loon Will Guide You",id:"loon-will-guide-you",level:2},{value:"Expected Data Format",id:"expected-data-format",level:2},{value:"Loon expects:",id:"loon-expects",level:3},{value:"Loon Data Specification",id:"loon-data-specification",level:2},{value:"Define Your Experiments: <code>aa_index.json</code>",id:"define-your-experiments-aa_indexjson",level:2},{value:"<code>aa_index.json</code> File Example:",id:"aa_indexjson-file-example",level:4},{value:"Datasets: Explain Each Experiment",id:"datasets-explain-each-experiment",level:2},{value:"Experiment Metadata File Specifications",id:"experiment-metadata-file-specifications",level:3},{value:"Header Transforms",id:"header-transforms",level:3},{value:"Location Metadata List",id:"location-metadata-list",level:3},{value:"Tags (optional)",id:"tags-optional",level:3},{value:"Composite Tabular Data File (optional)",id:"composite-tabular-data-file-optional",level:3},{value:"Segmentations Folder",id:"segmentations-folder",level:2}];function x(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"prepare-your-microscopy-data",children:"Prepare Your Microscopy Data"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.h4,{id:"to-use-loon-you-must-format-your-microscopy-data-according-to-loons-requirements-before-uploading-it",children:"To use Loon, you must format your microscopy data according to Loon's requirements before uploading it."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"loon-will-guide-you",children:"Loon Will Guide You"}),"\n",(0,i.jsxs)(n.p,{children:["When uploading data, the Loon software ",(0,i.jsx)(n.strong,{children:"will prompt you"})," to:"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Create New Experiment"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Select Files"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Add one or more imaging locations, each with unique ID"}),"\n",(0,i.jsxs)(n.li,{children:["For each ",(0,i.jsx)(n.strong,{children:"imaging location"}),", you select:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:".zip"})," file of your ",(0,i.jsx)(n.strong,{children:"cell images"})]}),"\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:".zip"})," file of your ",(0,i.jsx)(n.strong,{children:"cell segmentations"})]}),"\n",(0,i.jsxs)(n.li,{children:["A ",(0,i.jsx)(n.code,{children:".csv"})," file of your ",(0,i.jsx)(n.strong,{children:"cell metadata"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Define Cell Variables"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You map required variables ",(0,i.jsx)(n.em,{children:"(e.g., frame, time, id, parent, mass, x, y)"})," to columns in your cell metadata ",(0,i.jsx)(n.code,{children:".csv"})," file."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Review"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Upload"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Loon will handle"})," creating the full ",(0,i.jsx)(n.a,{href:"#expected-data-format",children:"expected data format below"})," for you."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["If using ",(0,i.jsx)(n.a,{href:"/loonar/docs/getting-started-with-loon/",children:(0,i.jsx)(n.strong,{children:"Local Loon"})})," instead, Loon will ",(0,i.jsx)(n.strong,{children:"not guide you"}),". You must prepare your data into the expected data format ",(0,i.jsx)(n.strong,{children:"yourself."}),(0,i.jsx)(n.br,{}),"\n","This removes the time burden of uploading to your server, however!"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"expected-data-format",children:"Expected Data Format"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Overview Figure of data structure",src:t(4097).A+"",width:"3444",height:"1976"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.h3,{id:"loon-expects",children:"Loon expects:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Experiment ",(0,i.jsx)(n.a,{href:"#define-your-experiments-aa_indexjson",children:(0,i.jsx)(n.strong,{children:"Index"})})," ",(0,i.jsx)(n.code,{children:"aa_index.json"}),": Define your cell imaging experiments ",(0,i.jsx)(n.em,{children:"(E.g. Exp. 1, Exp. 2)"})]}),"\n",(0,i.jsxs)(n.li,{children:["Experiment ",(0,i.jsx)(n.a,{href:"#define-your-experiments-aa_indexjson",children:(0,i.jsx)(n.strong,{children:"Datasets"})})," ",(0,i.jsx)(n.code,{children:".json"}),": Metadata about this experiment ",(0,i.jsxs)(n.em,{children:["(experiment name, cell attribute names e.g. ",(0,i.jsx)(n.code,{children:"time"}),", ",(0,i.jsx)(n.code,{children:"mass"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#define-your-experiments-aa_indexjson",children:(0,i.jsx)(n.strong,{children:"Imaging Location"})})," folders each containing:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Cell ",(0,i.jsx)(n.a,{href:"#define-your-experiments-aa_indexjson",children:(0,i.jsx)(n.strong,{children:"Images"})})," as a folder of ",(0,i.jsx)(n.code,{children:".tiff"})," files"]}),"\n",(0,i.jsxs)(n.li,{children:["Cell ",(0,i.jsx)(n.a,{href:"#define-your-experiments-aa_indexjson",children:(0,i.jsx)(n.strong,{children:"Segmentations"})})," (boundaries outlining each cell) as a folder of as ",(0,i.jsx)(n.code,{children:"GeoJSON"})," files"]}),"\n",(0,i.jsxs)(n.li,{children:["Cell ",(0,i.jsx)(n.a,{href:"#define-your-experiments-aa_indexjson",children:(0,i.jsx)(n.strong,{children:"Metadata"})})," as a ",(0,i.jsx)(n.code,{children:".csv"})," file ",(0,i.jsxs)(n.em,{children:["(cell's ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"mass"}),", ",(0,i.jsx)(n.code,{children:"x"}),", ",(0,i.jsx)(n.code,{children:"y"})," etc. over ",(0,i.jsx)(n.code,{children:"time"}),")"]})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(a,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)(n.strong,{children:"Recommended example file structure"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"your-microscopy-data/            # Your data file, choose any name\n\u251c\u2500\u2500 aa_index.json                # Defines your cell imaging experiments (e.g. Exp. 1, Exp. 2)\n\u251c\u2500\u2500 experiment_1/                # Your experiment file, any # of experiments, any names\n\u2502   \u251c\u2500\u2500 experiment_1.json        # Required metadata about this experiment (name, etc.)\n\u2502   \u251c\u2500\u2500 location_A/              # Your imaging location file, any # of loc's, choose any name\n\u2502   \u2502   \u251c\u2500\u2500 images_A/            # Folder of .tiff files (cell images)\n\u2502   \u2502   \u251c\u2500\u2500 segmentations_A/     # Folder of GeoJSON files (cell boundaries)\n\u2502   \u2502   \u2514\u2500\u2500 Table_A.csv          # Cell metadata (id, mass, x, y, etc. over time)\n\u2502   \u251c\u2500\u2500 location_B/\n\u2502   \u2502   \u251c\u2500\u2500 images_B/\n\u2502   \u2502   \u251c\u2500\u2500 segmentations_B/\n\u2502   \u2502   \u2514\u2500\u2500 Table_B.csv\n\u2502   \u2514\u2500\u2500 ...                      # More locations as needed\n\u251c\u2500\u2500 experiment_2/\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 ...\n"})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Cell metadata and segmentations are not generated by Loon."}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsxs)(n.em,{children:["As an initial step in your workflow, we recommend using software such as ",(0,i.jsx)(n.a,{href:"https://www.phasefocus.com/livecyte",children:"LiveCyte"})," and/or ",(0,i.jsx)(n.a,{href:"https://imagej.net/plugins/trackmate/",children:"TrackMate"})," to generate metadata."]})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"loon-data-specification",children:"Loon Data Specification"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optional Read"}),": If you'd like to learn more, we specify each data component below."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["If using ",(0,i.jsx)(n.a,{href:"/loonar/docs/getting-started-with-loon/",children:(0,i.jsx)(n.strong,{children:"Local Loon"})}),", you will ",(0,i.jsx)(n.strong,{children:"need to read"})," these specifications.",(0,i.jsx)(n.br,{}),"\n","Make sure to format your data file structure correctly ",(0,i.jsx)(n.a,{href:"#loon-expects-you-to-upload",children:"(see above)"})]}),"\n"]}),"\n",(0,i.jsxs)(r.A,{children:[(0,i.jsxs)(o.A,{value:"index",label:"Index",children:[(0,i.jsxs)(n.h2,{id:"define-your-experiments-aa_indexjson",children:["Define Your Experiments: ",(0,i.jsx)(n.code,{children:"aa_index.json"})]}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["This file contains a list of your experiment metadata files.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Required:"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"experiments":'})," attribute."]}),"\n",(0,i.jsxs)(n.li,{children:["File must be in ",(0,i.jsxs)(n.a,{href:"https://www.w3schools.com/js/js_json_syntax.asp",children:[(0,i.jsx)(n.code,{children:".json"})," format"]}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Choose any names for your experiment files ",(0,i.jsx)(n.code,{children:'e.g. "experiment_1.json"'})]}),"\n",(0,i.jsxs)(n.h4,{id:"aa_indexjson-file-example",children:[(0,i.jsx)(n.code,{children:"aa_index.json"})," File Example:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "experiments": [\n    "experiment_1.json",\n    "experiment_2.json",\n    "experiment_3.json",\n    "experiment_4.json",\n    "experiment_5.json",\n    "experiment_6.json",\n    "experiment_7.json",\n  ]\n}\n'})}),"\n"]})]}),(0,i.jsxs)(o.A,{value:"datasets",label:"Datasets",children:[(0,i.jsx)(n.h2,{id:"datasets-explain-each-experiment",children:"Datasets: Explain Each Experiment"}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Each of your imaging experiments"})," require an ",(0,i.jsx)(n.strong,{children:"experiment metadata file"})," as a ",(0,i.jsx)(n.code,{children:".json"})," file.",(0,i.jsx)(n.br,{}),"\n","This describes the experiment for Loon."]}),"\n",(0,i.jsxs)(n.p,{children:["In short, ",(0,i.jsxs)(n.strong,{children:["experiment metadata ",(0,i.jsx)(n.code,{children:".json"})," files"]})," require:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Attribute"}),(0,i.jsx)(n.th,{children:"Definition"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"name"})}),(0,i.jsx)(n.td,{children:"Name of the experiment as it should appear in the Loon dashboard."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"headers"})}),(0,i.jsx)(n.td,{children:"The list of column names in the CSV feature tables. The order should match the CSV files."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"headerTransforms"})}),(0,i.jsxs)(n.td,{children:["Defines the name of certain special columns (",(0,i.jsx)(n.code,{children:"time"}),", ",(0,i.jsx)(n.code,{children:"frame"}),", ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"parent"}),", ",(0,i.jsx)(n.code,{children:"mass"}),", ",(0,i.jsx)(n.code,{children:"x"}),", ",(0,i.jsx)(n.code,{children:"y"}),"). This is optional if the name already exactly matches in headers. See ",(0,i.jsx)(n.a,{href:"#header-transforms",children:"the table below"})," for information about these special columns."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"locationMetadataList"})}),(0,i.jsxs)(n.td,{children:["A list of imaging location metadata. Each imaging location will include an ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"tabularDataFilename"}),", ",(0,i.jsx)(n.code,{children:"imageDataFilename"}),", and ",(0,i.jsx)(n.code,{children:"segmentationsFolder"}),". See ",(0,i.jsx)(n.a,{href:"#location-metadata-list",children:"the table below"})," for more information on each of these."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"compositeTabularDataFilename"})}),(0,i.jsxs)(n.td,{children:["Specifies the path to the combined tabular data file. See the ",(0,i.jsx)(n.a,{href:"#composite-tabular-data-file",children:"section below"})," for  more information."]})]})]})]}),"\n",(0,i.jsxs)(a,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)(n.strong,{children:"Example:"})," Experiment Metadata ",(0,i.jsx)(n.code,{children:".json"})," File"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'{\n  "name":"ExperimentOne",\n  "headers": [\n    "Frame",\n    "Tracking ID",\n    "Lineage ID",\n    "Position X (\xb5m)",\n    "Position Y (\xb5m)",\n    "Pixel Position X (pixels)",\n    "Pixel Position Y (pixels)",\n    "Volume (\xb5m\xb3)",\n    "Radius (\xb5m)",\n    "Area (\xb5m\xb2)",\n    "Sphericity ()",\n    "Dry Mass (pg)",\n    "Track Length (\xb5m)",\n    "Parent ID"\n  ],\n  "headerTransforms": {\n    "time": "Frame",\n    "frame": "Frame",\n    "id": "Tracking ID",\n    "parent": "Parent ID",\n    "mass": "Dry Mass (pg)",\n    "x": "Pixel Position X (pixels)",\n    "y": "Pixel Position Y (pixels)"\n  },\n  "compositeTabularDataFilename":"experiment1/composite_tabular_data_file.parquet",\n  "locationMetadataList": [\n    {\n      "id": "Condition A",\n      "tabularDataFilename": "experiment1/location_A/Table_A.csv",\n      "imageDataFilename": "experiment1/location_A/images_A.companion.ome",\n      "segmentationsFolder": "experiment1/location_A/segmentations_A",\n      "tags":{\n        "drug":"drug_1",\n        "concentration":"0.1"\n      }\n    },\n    {\n      "id": "Condition B",\n      "tabularDataFilename": "experiment1/location_B/Table_B.csv",\n      "imageDataFilename": "experiment1/location_B/images_B.companion.ome",\n      "segmentationsFolder": "experiment1/location_B/segmentations_B"\n      "tags":{}\n    },\n    {\n      "id": "Condition C",\n      "tabularDataFilename": "experiment1/location_C/Table_C.csv",\n      "imageDataFilename": "experiment1/location_C/images_C.companion.ome",\n      "segmentationsFolder": "experiment1/location_C/segmentations_C",\n      "tags":{\n        "drug":"drug_2",\n      }\n    }\n  ]\n}\n'})})]}),"\n",(0,i.jsx)("br",{}),"\n",(0,i.jsx)(n.h3,{id:"experiment-metadata-file-specifications",children:"Experiment Metadata File Specifications"}),"\n",(0,i.jsxs)(r.A,{children:[(0,i.jsxs)(o.A,{value:"header-transforms",label:"Header Transforms",children:[(0,i.jsx)(n.h3,{id:"header-transforms",children:"Header Transforms"}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Attribute"}),(0,i.jsx)(n.th,{children:"Definition"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"frame"})}),(0,i.jsx)(n.td,{children:"The frame number indicates which number image the data row comes from in a sequence of images."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"time"})}),(0,i.jsx)(n.td,{children:"The time when the image was recorded. Often this is relative to the start of the experiment. If this is not explicitly recorded, then the the frame number can be used as a proxy."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"The unique ID for a particular tracked cell. This should be the same across frames for that cell's lifetime."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"parent"})}),(0,i.jsxs)(n.td,{children:["The ",(0,i.jsx)(n.code,{children:"id"})," of the parent cell. If this is not tracked at all for an experiment, then map this column to the same one as the ",(0,i.jsx)(n.code,{children:"id"})," column."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"mass"})}),(0,i.jsx)(n.td,{children:"The mass of the cell."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"x"})}),(0,i.jsx)(n.td,{children:"The X coordinate for the cell's center position in pixel space. (It does not matter what definition of center is used.)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"y"})}),(0,i.jsx)(n.td,{children:"Same, but for the Y coordinate."})]})]})]})]}),(0,i.jsxs)(o.A,{value:"location-metadata-list",label:"Location Metadata List",children:[(0,i.jsx)(n.h3,{id:"location-metadata-list",children:"Location Metadata List"}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Attribute"}),(0,i.jsx)(n.th,{children:"Definition"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"A unique name for this location. Can be anything, but will be displayed in the interface, so a more descriptive name is better."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tabularDataFilename"})}),(0,i.jsx)(n.td,{children:"The location of the CSV file feature table for this experiment."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"imageDataFilename"})}),(0,i.jsxs)(n.td,{children:["The location of the OME TIFF image file. This should be a ",(0,i.jsx)(n.code,{children:"*.companion.ome"})," file."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"segmentationsFolder"})}),(0,i.jsxs)(n.td,{children:["This folder contains all of the segmentation files for a given location. See the ",(0,i.jsx)(n.a,{href:"#segmentations-folder",children:"section on segmentations"})," for more details."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tags"})}),(0,i.jsxs)(n.td,{children:["A JSON object containing key-value pairs that capture metadata about the particular location. See the ",(0,i.jsx)(n.a,{href:"#tags",children:"tags section"})," for more information and some examples."]})]})]})]})]}),(0,i.jsxs)(o.A,{value:"tags",label:"Tags (optional)",children:[(0,i.jsx)(n.h3,{id:"tags-optional",children:"Tags (optional)"}),(0,i.jsx)(n.p,{children:"Tags are used to define metadata about an individual location. This is used in the Loon UI to specify specific conditions corresponding to the location. The tags object has no restrictions. For example, locations have have completely different sets of tags, locations may have no tags, and locations can overlap on one more tags."}),(0,i.jsx)(n.p,{children:"For example, suppose we have three locations. Your tags may look like this:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "id": "location_1",\n    ...\n    "tags": {\n      "drug": "drug_1",\n      "concentration":"0.1"\n    }\n  },\n  {\n    "id": "location_2",\n    ...\n    "tags": {}\n  },\n  {\n    "id": "location_3",\n    ...\n    "tags": {\n      "drug": "drug_3"\n    }\n  }\n]\n'})})]}),(0,i.jsxs)(o.A,{value:"composite-tabular-data-file",label:"Composite Tabular Data File (optional)",children:[(0,i.jsx)(n.h3,{id:"composite-tabular-data-file-optional",children:"Composite Tabular Data File (optional)"}),(0,i.jsx)(n.p,{children:'This key specifies the location (relative to the root of the current experiment directory) of a "combined metadata table" as a parquet file.'}),(0,i.jsx)(n.p,{children:"This table must be the union of each of the individual location metadata csv files with an additional location column and the union of all tags separated as columns as well."}),(0,i.jsxs)(n.p,{children:["For example, suppose we use the example from ",(0,i.jsx)(n.a,{href:"#tags",children:"tags section"}),". Then, a sample of 6 rows of our parquet file would be something like this:"]}),(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"location"}),(0,i.jsx)(n.th,{children:"{rest_of_headers}"}),(0,i.jsx)(n.th,{children:"drug"}),(0,i.jsx)(n.th,{children:"concentration"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"location_1"}),(0,i.jsx)(n.td,{children:". . ."}),(0,i.jsx)(n.td,{children:"drug_1"}),(0,i.jsx)(n.td,{children:"0.1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"location_1"}),(0,i.jsx)(n.td,{children:". . ."}),(0,i.jsx)(n.td,{children:"drug_1"}),(0,i.jsx)(n.td,{children:"0.1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"location_2"}),(0,i.jsx)(n.td,{children:". . ."}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"location_2"}),(0,i.jsx)(n.td,{children:". . ."}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"location_3"}),(0,i.jsx)(n.td,{children:". . ."}),(0,i.jsx)(n.td,{children:"drug_3"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"location_3"}),(0,i.jsx)(n.td,{children:". . ."}),(0,i.jsx)(n.td,{children:"drug_3"}),(0,i.jsx)(n.td,{})]})]})]}),(0,i.jsx)(n.p,{children:"Here, the empty spaces denote empty strings."})]})]}),"\n"]})]}),(0,i.jsxs)(o.A,{value:"imaging_locations",label:"Imaging Locations",children:[(0,i.jsxs)(n.p,{children:["An ",(0,i.jsx)(n.strong,{children:"Imaging Location"})," is simply a folder containing a distinct imaging dataset of your choosing.",(0,i.jsx)(n.br,{}),"\n","Created at a distinct location, time, or for a specific purpose."]}),(0,i.jsx)(n.p,{children:"Imaging Location folders each contain:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Cell ",(0,i.jsx)(n.strong,{children:"Images"})," as a folder of ",(0,i.jsx)(n.code,{children:".tiff"})," files"]}),"\n",(0,i.jsxs)(n.li,{children:["Cell ",(0,i.jsx)(n.a,{href:"#segmentations-folder",children:(0,i.jsx)(n.strong,{children:"Segmentations"})})," (boundaries outlining each cell) as a folder of as ",(0,i.jsx)(n.code,{children:"GeoJSON"})," files"]}),"\n",(0,i.jsxs)(n.li,{children:["Cell ",(0,i.jsx)(n.strong,{children:"Metadata"})," as a ",(0,i.jsx)(n.code,{children:".csv"})," file ",(0,i.jsxs)(n.em,{children:["(cell's ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"mass"}),", ",(0,i.jsx)(n.code,{children:"x"}),", ",(0,i.jsx)(n.code,{children:"y"})," etc. over ",(0,i.jsx)(n.code,{children:"time"}),")"]})]}),"\n"]})]}),(0,i.jsxs)(o.A,{value:"cell_images",label:"Cell Images",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cell Images"})," is a folder of ",(0,i.jsx)(n.code,{children:".tiff"})," ",(0,i.jsx)(n.em,{children:"(image)"})," files ",(0,i.jsx)(n.strong,{children:"or"})," ",(0,i.jsx)(n.code,{children:".ome.tiff"})," ",(0,i.jsx)(n.em,{children:"(microscopy image)"})," files."]}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["We ahdere to the ",(0,i.jsx)(n.a,{href:"https://docs.openmicroscopy.org/ome-model/5.6.3/ome-tiff/",children:"ome-tiff"})," library for cell images."]}),"\n"]})]}),(0,i.jsxs)(o.A,{value:"segmentations",label:"Cell Segmentations",children:[(0,i.jsx)(n.h2,{id:"segmentations-folder",children:"Segmentations Folder"}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Each imaging location should have a corresponding folder that contains all of the segmentation files.",(0,i.jsx)(n.br,{}),"\n","The names of the files must correspond to the imaging frame.",(0,i.jsx)(n.br,{}),"\n","That is, ",(0,i.jsx)(n.code,{children:"1.json"})," will contain all of the cell segmentations for the first frame, ",(0,i.jsx)(n.code,{children:"2.json"})," will contain the second frame, and so on.",(0,i.jsx)(n.br,{}),"\n","Each JSON file must follow the GeoJSON specification.",(0,i.jsx)(n.br,{}),"\n","In addition to the standard geometry attribute, the ",(0,i.jsx)(n.code,{children:"bbox"})," attribute must be defined.",(0,i.jsx)(n.br,{}),"\n","To link the segmentations with the corresponding metadata, the cell ",(0,i.jsx)(n.code,{children:"id"})," defined in the feature table must be included as an ",(0,i.jsx)(n.code,{children:"ID"})," in the GeoJSON properties object."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Often, segmentations are instead generated as ",(0,i.jsx)(n.code,{children:"*.roi"})," files.",(0,i.jsx)(n.br,{}),"\n","When uploading using MinIO, Loon will automatically convert the ",(0,i.jsx)(n.code,{children:".roi"})," files to proper GeoJSON format.",(0,i.jsx)(n.br,{}),"\n","If you are instead using Loon without MinIO (i.e. using Local Loon), you will have to convert the ",(0,i.jsx)(n.code,{children:".roi"})," files to GeoJSON yourself.",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.a,{href:"https://github.com/visdesignlab/aardvark-util/blob/main/roi_to_geojson.py",children:"Here"})," is a Python script which can convert ",(0,i.jsx)(n.code,{children:".roi"})," to GeoJSON from one of our accompanying repositories."]})}),"\n"]})]}),(0,i.jsxs)(o.A,{value:"cell_metadata",label:"Cell Metadata",children:[(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Cell Metadata"})," is a ",(0,i.jsx)(n.code,{children:".csv"})," file of your choice containing:"]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rows"}),": A cell at a certain time point"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Columns"}),": Metadata about that cell"]}),"\n"]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example contents"}),":"]}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"example_metadata_table.csv"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"CELL_ID"}),(0,i.jsx)(n.th,{children:"LOCATION"}),(0,i.jsx)(n.th,{children:"PARENT_CELL"}),(0,i.jsx)(n.th,{children:"TIME"}),(0,i.jsx)(n.th,{children:"FRAME"}),(0,i.jsx)(n.th,{children:"MASS"}),(0,i.jsx)(n.th,{children:"POSITION_X"}),(0,i.jsx)(n.th,{children:"POSITION_Y"}),(0,i.jsx)(n.th,{children:"..."})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"101"}),(0,i.jsx)(n.td,{children:"location_A"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"12.5"}),(0,i.jsx)(n.td,{children:"150"}),(0,i.jsx)(n.td,{children:"320"}),(0,i.jsx)(n.td,{children:"..."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"102"}),(0,i.jsx)(n.td,{children:"location_A"}),(0,i.jsx)(n.td,{children:"101"}),(0,i.jsx)(n.td,{children:"5"}),(0,i.jsx)(n.td,{children:"2"}),(0,i.jsx)(n.td,{children:"13.1"}),(0,i.jsx)(n.td,{children:"155"}),(0,i.jsx)(n.td,{children:"325"}),(0,i.jsx)(n.td,{children:"..."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"103"}),(0,i.jsx)(n.td,{children:"location_B"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"0"}),(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"11.8"}),(0,i.jsx)(n.td,{children:"140"}),(0,i.jsx)(n.td,{children:"310"}),(0,i.jsx)(n.td,{children:"..."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."}),(0,i.jsx)(n.td,{children:"..."})]})]})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Loon requires"})," these columns: ",(0,i.jsx)(n.code,{children:"frame"}),", ",(0,i.jsx)(n.code,{children:"time"}),", ",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"parent"}),", ",(0,i.jsx)(n.code,{children:"mass"}),", ",(0,i.jsx)(n.code,{children:"x"}),", ",(0,i.jsx)(n.code,{children:"y"}),(0,i.jsx)(n.br,{}),"\n","Those required columns can be ",(0,i.jsx)(n.strong,{children:"named however you'd like"})," in your file, in any order (see ",(0,i.jsx)(n.a,{href:"#header-transforms",children:"header transforms"}),").",(0,i.jsx)(n.br,{}),"\n","You can add any other metadata columns you would like."]}),"\n"]}),"\n"]})]})]})]})}function j(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>o});t(6540);var i=t(4164);const s={tabItem:"tabItem_Ymn6"};var r=t(4848);function o(e){let{children:n,hidden:t,className:o}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,i.A)(s.tabItem,o),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>_});var i=t(6540),s=t(4164),r=t(3104),o=t(6347),a=t(205),l=t(7485),d=t(1682),c=t(9466);function h(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:s}}=e;return{value:n,label:t,attributes:i,default:s}}))}(t);return function(e){const n=(0,d.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function j(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function u(e){let{queryString:n=!1,groupId:t}=e;const s=(0,o.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(r),(0,i.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})}),[r,s])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,r=x(e),[o,l]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!j({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:r}))),[d,h]=u({queryString:t,groupId:s}),[m,p]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,r]=(0,c.Dv)(t);return[s,(0,i.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:s}),f=(()=>{const e=d??m;return j({value:e,tabValues:r})?e:null})();(0,a.A)((()=>{f&&l(f)}),[f]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!j({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),p(e)}),[h,p,r]),tabValues:r}}var p=t(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(4848);function b(e){let{className:n,block:t,selectedValue:i,selectValue:o,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,r.a_)(),c=e=>{const n=e.currentTarget,t=l.indexOf(n),s=a[t].value;s!==i&&(d(n),o(s))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>l.push(e),onKeyDown:h,onClick:c,...r,className:(0,s.A)("tabs__item",f.tabItem,r?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function y(e){let{lazy:n,children:t,selectedValue:s}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===s));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function v(e){const n=m(e);return(0,g.jsxs)("div",{className:(0,s.A)("tabs-container",f.tabList),children:[(0,g.jsx)(b,{...n,...e}),(0,g.jsx)(y,{...n,...e})]})}function _(e){const n=(0,p.A)();return(0,g.jsx)(v,{...e,children:h(e.children)},String(n))}},4097:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/overview-5b246410402d8117c35e7bca3b40cd22.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);