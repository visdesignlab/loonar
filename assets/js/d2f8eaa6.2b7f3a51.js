"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[128],{3970:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>a});var s=t(4848),r=t(8453);const i={},o="Optional: Use Data from TrackMate",c={id:"getting-started-with-loon/trackmate-data",title:"Optional: Use Data from TrackMate",description:"TrackMate is a popular FIJI (Image Analysis) plugin for:",source:"@site/docs/getting-started-with-loon/trackmate-data.md",sourceDirName:"getting-started-with-loon",slug:"/getting-started-with-loon/trackmate-data",permalink:"/loonar/docs/getting-started-with-loon/trackmate-data",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Prepare Your Microscopy Data",permalink:"/loonar/docs/getting-started-with-loon/data"},next:{title:"Deploy Loon",permalink:"/loonar/docs/getting-started-with-loon/quickstart"}},l={},a=[{value:"TrackMate is a popular FIJI (Image Analysis) plugin for:",id:"trackmate-is-a-popular-fiji-image-analysis-plugin-for",level:4},{value:"1:\xa0\xa0\xa0Export Data from TrackMate",id:"1export-data-from-trackmate",level:2},{value:"1.1: Configure your experiment timelapse",id:"11-configure-your-experiment-timelapse",level:3},{value:"1.2: Run Tracking",id:"12-run-tracking",level:3},{value:"1.3: Define Cell Lineages",id:"13-define-cell-lineages",level:3},{value:"1.4: Export <code>.roi</code> Segmentations",id:"14-export-roi-segmentations",level:3},{value:"1.5: Export Cell Metadata <code>.csv</code>",id:"15-export-cell-metadata-csv",level:3},{value:"2:\xa0\xa0\xa0Convert TrackMate Data into Loon Format",id:"2convert-trackmate-data-into-loon-format",level:2},{value:"Conversion Script Info:",id:"conversion-script-info",level:3},{value:"Run the script:",id:"run-the-script",level:3},{value:"Download our <a>new conversion script \u2193</a>",id:"download-our-new-conversion-script-",level:3},{value:"Run the script:",id:"run-the-script-1",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"optional-use-data-from-trackmate",children:"Optional: Use Data from TrackMate"}),"\n",(0,s.jsxs)(n.h4,{id:"trackmate-is-a-popular-fiji-image-analysis-plugin-for",children:[(0,s.jsx)(n.a,{href:"https://imagej.net/plugins/trackmate/",children:"TrackMate"})," is a popular FIJI (Image Analysis) plugin for:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Robust tracking of cells and other objects in microscopy time-lapse images"}),"\n",(0,s.jsx)(n.li,{children:"Various detection and tracking algorithms"}),"\n",(0,s.jsx)(n.li,{children:"Visualization and analysis tools"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"https://www.cellpose.org/",children:"Cellpose"})," is a cell segmentation algorithm for TrackMate:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enables advanced object detection directly within the TrackMate workflow"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"1export-data-from-trackmate",children:["1:\xa0\xa0\xa0Export Data from ",(0,s.jsx)(n.a,{href:"https://imagej.net/plugins/trackmate/",children:"TrackMate"})]}),"\n",(0,s.jsx)(n.h3,{id:"11-configure-your-experiment-timelapse",children:"1.1: Configure your experiment timelapse"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Open and set properties for a timelapse of interest (Image > Properties; update Channels, Slices, Frames, and Pixel dimensions as desired, these are carried over to TrackMate output and ultimately the Loon output."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"12-run-tracking",children:"1.2: Run Tracking"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:'Run tracking using TrackMate user interface with optimized tracking parameters for your specific dataset. After tracking is complete, and you are in the "Display Options" menu, manually correct tracks using TrackScheme as necessary.'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"TrackMate settings screenshot",src:t(3573).A+"",width:"420",height:"691"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"13-define-cell-lineages",children:"1.3: Define Cell Lineages"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"After tracks have been manually corrected, click \"next\" (bottom right) to navigate to the final menu titled \"Select an action\", scroll down to select \"Spot auto-naming\", and select \"Append 'a', 'b' for each branch. For each cell, each 'a' and 'b' cell are children."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Spot naming settings",src:t(6660).A+"",width:"607",height:"491"})}),"\n",(0,s.jsx)(n.p,{children:"The names should appear like this."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"TrackMate Names Result",src:t(8659).A+"",width:"238",height:"356"})}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"14-export-roi-segmentations",children:["1.4: Export ",(0,s.jsx)(n.code,{children:".roi"})," Segmentations"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:'In the same "Select an action" menu, select "Export spots to IJ ROIS". This will save a .zip folder of ROIs that will be the segmentations into Loon. Click "Execute" (bottom right). Select "All spots" if you would like to export all ROIs to Loon.'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"TrackMate settings screenshot",src:t(5427).A+"",width:"357",height:"255"})}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"15-export-cell-metadata-csv",children:["1.5: Export Cell Metadata ",(0,s.jsx)(n.code,{children:".csv"})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Once all tracks have been manually corrected, Click \u201cSpots\u201d on the bottom left of the \u201cDisplay Options\u201d menu. This will bring up the \u201cAll Spots Table\u201d. Click \u201cExport to CSV\u201d (Top right) and save the file."}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"2convert-trackmate-data-into-loon-format",children:["2:\xa0\xa0\xa0Convert TrackMate Data into ",(0,s.jsx)(n.a,{href:"/loonar/docs/getting-started-with-loon/data",children:"Loon Format"})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["We currently use ",(0,s.jsx)(n.a,{href:"https://github.com/visdesignlab/aardvark-util/blob/main/ingest_trackmate.py",children:"our conversion script on github"}),". On GitHub, click the download button at the top-right of the script."]}),"\n",(0,s.jsx)(n.h3,{id:"conversion-script-info",children:"Conversion Script Info:"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Inputs:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.code,{children:".csv"})," file from TrackMate","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Must currently include ",(0,s.jsx)(n.code,{children:"LABEL"}),", ",(0,s.jsx)(n.code,{children:"FRAME"}),", ",(0,s.jsx)(n.code,{children:"POSITION_X"}),", ",(0,s.jsx)(n.code,{children:"POSITION_Y"})," columns"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["A folder containing ",(0,s.jsx)(n.code,{children:".roi"})," files from TrackMate"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What the script does:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Reads your ",(0,s.jsx)(n.code,{children:".csv"})," file, removes unnecessary rows / columns, sorts by frame"]}),"\n",(0,s.jsxs)(n.li,{children:["Infers / Adds a ",(0,s.jsx)(n.code,{children:"parent"})," column to the ",(0,s.jsx)(n.code,{children:".csv"})," file, which includes the parents of each track"]}),"\n",(0,s.jsxs)(n.li,{children:["Outputs that corrected ",(0,s.jsx)(n.code,{children:".csv"})]}),"\n",(0,s.jsxs)(n.li,{children:["Converts that corrected ",(0,s.jsx)(n.code,{children:".csv"})," to a ",(0,s.jsx)(n.code,{children:".parquet"})," file"]}),"\n",(0,s.jsxs)(n.li,{children:["Converts ",(0,s.jsx)(n.code,{children:".roi"})," files to ",(0,s.jsx)(n.code,{children:"GeoJSON"})," format, creating a folder structure based on frames"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Outputs:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.code,{children:"metadata.csv"})," file with metadata for Loon"]}),"\n",(0,s.jsxs)(n.li,{children:["A ",(0,s.jsx)(n.code,{children:"metadata.parquet"})," file with metadata for Loon"]}),"\n",(0,s.jsxs)(n.li,{children:["A segmentations folder with ",(0,s.jsx)(n.code,{children:"GeoJSON"})," files for each frame"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"run-the-script",children:"Run the script:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open your terminal:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mac:"})," Press ",(0,s.jsx)(n.code,{children:"Cmd + Space"}),", type ",(0,s.jsx)(n.code,{children:"Terminal"}),", and press ",(0,s.jsx)(n.code,{children:"Enter"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Windows:"})," Press ",(0,s.jsx)(n.code,{children:"Win + R"}),", type ",(0,s.jsx)(n.code,{children:"cmd"}),", and press ",(0,s.jsx)(n.code,{children:"Enter"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Change to the directory where you saved ",(0,s.jsx)(n.code,{children:"ingest_trackmate.py"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mac:"})," ",(0,s.jsx)(n.code,{children:"cd ~/Downloads"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Windows:"})," ",(0,s.jsx)(n.code,{children:"cd %USERPROFILE%\\Downloads"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Run the script:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Type ",(0,s.jsx)(n.code,{children:'ingest_trackmate.py "/path/to/your/input.csv" "/path/to/your/roi_files" "/path/to/your/output"'})," and press ",(0,s.jsx)(n.code,{children:"Enter"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)(n.strong,{children:"Optional:"})," New Conversion Script with User Interface"]}),(0,s.jsxs)(n.h3,{id:"download-our-new-conversion-script-",children:["Download our ",(0,s.jsx)("a",{href:"/convert_trackmate.py",download:"convert_trackmate.py",children:"new conversion script \u2193"})]}),(0,s.jsx)(n.h3,{id:"run-the-script-1",children:"Run the script:"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open your terminal:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mac:"})," Press ",(0,s.jsx)(n.code,{children:"Cmd + Space"}),", type ",(0,s.jsx)(n.code,{children:"Terminal"}),", and press ",(0,s.jsx)(n.code,{children:"Enter"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Windows:"})," Press ",(0,s.jsx)(n.code,{children:"Win + R"}),", type ",(0,s.jsx)(n.code,{children:"cmd"}),", and press ",(0,s.jsx)(n.code,{children:"Enter"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Change to the directory where you saved ",(0,s.jsx)(n.code,{children:"convert_trackmate.py"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mac:"})," ",(0,s.jsx)(n.code,{children:"cd ~/Downloads"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Windows:"})," ",(0,s.jsx)(n.code,{children:"cd %USERPROFILE%\\Downloads"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Run the script:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Type ",(0,s.jsx)(n.code,{children:"python convert_trackmate.py"})," and press ",(0,s.jsx)(n.code,{children:"Enter"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Follow the on-screen instructions to convert your TrackMate data to Loon format"}),"\n"]})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},5427:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/export-spots-8313ac5177604ce2559c571201a4e12f.png"},6660:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/spot-naming-2fa43b9ff43f302de035eb20327d63c5.png"},8659:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/track-names-0b906c5a78c303f35bb87698b8914ca5.png"},3573:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/trackmate-settings-3ef86ac133e41ba732f73dce44de3dab.png"},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);